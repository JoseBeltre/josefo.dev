---
import { projects } from '../../data/projects'
import Badge from '../Badge.astro'
import ProjectCard from '../ProjectCard.astro'
---

<section id="portfolio" class="lg:mb-50">
  <div class="px-6 lg:px-0">
    <Badge class="bg-secondary/20 text-secondary border-secondary">Portfolio</Badge>
    <h2 class="section-title">As√≠ se ven mis proyectos</h2>
  </div>
  <div class="projects-wrapper grid gap-12 lg:gap-19">
    {
      projects.map((project, index) => 
        <ProjectCard
          title={project.name}
          projectType={project.projectType}
          description={project.description}
          goal={project.goal}
          images={project.images}
          index={index}
        />
      )
    }
  </div>
</section>
<script>
  import { gsap } from 'gsap'
  import { ScrollTrigger } from 'gsap/all'
  gsap.registerPlugin(ScrollTrigger)
  const projectsWrapper = document.querySelector('.projects-wrapper')
  const projectCards = projectsWrapper?.querySelectorAll('article')

  projectCards?.forEach((projectCard) => {
    gsap.from(projectCard, {
      scrollTrigger: {
        trigger: projectCard,
        start: 'top 80%',
      },
      scale: 0,
      opacity: 0,
      duration: 1,
      ease: 'elastic.out(1, 0.7)',
    })
  })


</script>
